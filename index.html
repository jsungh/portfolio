<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" type="text/css" href="/fonts/fonts.css">
    <link rel="stylesheet" type="text/css" href="/css/common.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/responsive.css">
</head>

<body>
    <main>

        <div class="planet_wrap">
            <div class="sub_planet planet1"></div>
            <div class="sub_planet planet2"></div>
            <div class="sub_planet planet3"></div>
            <div class="sub_planet planet4"></div>
            <div class="sub_planet planet5"></div>
            <div class="sub_planet planet6"></div>
            <div class="sub_planet planet7"></div>
            <div class="sub_planet planet8"></div>
            <div class="sub_planet planet9"></div>
            <div class="sub_planet planet10"></div>
            <div class="sub_planet planet11"></div>
            <div class="sub_planet planet12"></div>
            <div class="sub_planet planet13"></div>
            <div class="sub_planet planet14"></div>
            <div class="sub_planet planet15"></div>
            <div class="sub_planet planet16"></div>
            <div class="sub_planet planet17"></div>
            <div class="sub_planet planet18"></div>
            <div class="sub_planet planet19"></div>
            <div class="sub_planet planet20"></div>
            <div class="sub_planet planet21"></div>
            <div class="sub_planet planet22"></div>
            <div class="sub_planet planet23"></div>
            <div class="sub_planet planet24"></div>

        </div>

        <div id="character" class="character">
            <img src="/images/tail.webp" alt="" />
        </div>
    </main>
</body>

<script>
    const character = document.getElementById('character');

    // 왕복 횟수
    const roundTrip = 3;
    // 캐릭터 움직임 방향
    let direction = 'right';
    let right = 50;

    window.addEventListener('scroll', function () {
        
        let main = document.querySelector('main');

        let totalHeight = main.offsetHeight;
        let screenHeight = document.documentElement.offsetHeight;
        let currentScroll = document.documentElement.scrollTop;

        let ratio = totalHeight / screenHeight;

        let onePersentPerPixel = totalHeight / roundTrip / 120;

        let tempValue = Math.floor((currentScroll / onePersentPerPixel));

        if(tempValue >= 90) {
            tempValue = (tempValue - (Math.floor((currentScroll / onePersentPerPixel) / 30) * 30));
        } else if(tempValue >= 30) {
            console.log(tempValue, (Math.floor((currentScroll / onePersentPerPixel) / 30)));
            tempValue = 30 - (tempValue - (Math.floor((currentScroll / onePersentPerPixel) / 30) * 30));
        }
        //  else {
        //     tempValue = 30 - (tempValue - ((Math.floor((currentScroll / onePersentPerPixel) / 30) - 1) * 30));
        // }

        // if(tempValue >= 90) {
        //     tempValue = (tempValue - (Math.floor((currentScroll / onePersentPerPixel) / 30) * 30));
        // }
            

        // console.log(Math.floor((currentScroll / onePersentPerPixel) / 30), Math.floor((currentScroll / onePersentPerPixel)), (Math.floor((currentScroll / onePersentPerPixel) / 30) * 30));

        // if(right >= 80) {
        //     tempValue *= -1;
        // } 
        // if(right <= 20) {
        //     tempValue *= 1;
        // }

        right = 50 + tempValue;

        // console.log(tempValue);
        

        character.style.top = ((currentScroll + screenHeight) / totalHeight * 60) + '%';
        character.style.right = right + '%';


        
    });
</script>

</html>